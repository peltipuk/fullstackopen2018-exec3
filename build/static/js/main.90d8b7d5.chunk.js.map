{"version":3,"sources":["services/persons.js","components/App.js","index.js"],"names":["baseUrl","persons","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","concat","remove","delete","notificationDelay","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","componentDidMount","console","log","personsService","setState","clearNotification","delay","setTimeout","notificationMessage","createNewPerson","name","state","newName","number","newNumber","newPerson","toConsumableArray","addEntry","event","preventDefault","personToUpdate","find","person","undefined","promise","window","confirm","objectSpread","updatedPerson","filter","catch","err","handleNameChange","target","value","handleNumberChange","handleFilterChange","handleRemoveClick","status","_this2","personsToShow","toLowerCase","indexOf","react_default","a","createElement","App_Notification","message","App_FilterForm","onChange","App_AddEntryForm","onSubmit","map","App_PhoneCatalogEntry","key","clickHandler","React","Component","Notification","_ref","className","AddEntryForm","_ref2","type","FilterForm","_ref3","PhoneCatalogEntry","_ref4","onClick","ReactDOM","render","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.90d8b7d5.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request\n}\n\nexport default { getAll, create, update, remove }\n","import React from 'react'\nimport personsService from '../services/persons'\n\nconst notificationDelay = 3000\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      persons: [],\n      newName: '',\n      newNumber: '',\n      filter: '',\n      notificationMessage: null,\n    }\n  }\n\n  componentDidMount = () => {\n    console.log('componentDidMount')\n    personsService.getAll()\n      .then(persons => {\n        this.setState({ persons: persons })\n      }\n      )\n  }\n\n  clearNotification = (delay) => {\n    setTimeout(() => {\n      this.setState({ notificationMessage: null })\n    }, delay);\n  }\n\n  createNewPerson = () => {\n    console.log('Creating person')\n    return personsService.create({ name: this.state.newName, number: this.state.newNumber })\n      .then(newPerson => {\n        console.log('Created new person: ', newPerson)\n        this.setState(\n          {\n            persons: [...this.state.persons, newPerson],\n            newName: '',\n            newNumber: '',\n            notificationMessage: `lisättiin ${newPerson.name}`\n          }\n        )\n        this.clearNotification(notificationDelay)\n      })\n  }\n\n  addEntry = (event) => {\n    event.preventDefault();\n    const personToUpdate = this.state.persons.find(person => person.name === this.state.newName)\n    if (personToUpdate === undefined) {\n      const promise = this.createNewPerson()\n      console.log('createNewPerson() return promise: ', promise)\n    } else {\n      if (window.confirm(`${this.state.newName} on jo luettelossa, korvataanko vanha numero uudella?`)) {\n        personsService\n          .update(personToUpdate.id, { ...personToUpdate, number: this.state.newNumber })\n          .then(updatedPerson => {\n            console.log('Updated resource:', updatedPerson)\n            this.setState(\n              {\n                persons: [...this.state.persons.filter(person => person.id !== updatedPerson.id), updatedPerson],\n                newName: '',\n                newNumber: '',\n                notificationMessage: `${updatedPerson.name}: numero muutettu`\n              }\n            )\n            this.clearNotification(notificationDelay)\n          })\n          .catch(err => {\n            // In reality a bit more sophisticated error handling is required (checking of response status etc.)\n            // Remove the (presumably missing from database) person from the state\n            this.setState({\n              persons: this.state.persons.filter(person => person.name !== personToUpdate.name)\n            })\n\n            console.log(`Could not update ${personToUpdate.name}: creating instead`)\n            const promise = this.createNewPerson()\n            console.log('createNewPerson() return promise: ', promise)\n          })\n      } else {\n        console.log(`Cancelled updating of ${this.state.newName}`)\n      }\n    }\n  }\n\n  handleNameChange = (event) => {\n    this.setState({ newName: event.target.value })\n  }\n\n  handleNumberChange = (event) => {\n    this.setState({ newNumber: event.target.value })\n  }\n\n  handleFilterChange = (event) => {\n    this.setState({ filter: event.target.value })\n  }\n\n  handleRemoveClick = (id, name) => () => {\n    if (window.confirm(`Delete '${name}'`)) {\n      console.log(`Removing person with id ${id}`)\n      personsService.remove(id).then(response => {\n        console.log('Delete response status: ', response.status)\n        this.setState(\n          {\n            persons: this.state.persons.filter(person => person.id !== id),\n            notificationMessage: `poistettiin ${name}`\n          }\n        )\n        this.clearNotification(notificationDelay)\n      })\n    } else {\n      console.log(`Cancelled deleting of ${name}`)\n    }\n  }\n\n  render() {\n    const personsToShow = this.state.persons.filter(person => person.name.toLowerCase().indexOf(this.state.filter.toLowerCase()) >= 0)\n\n    return (\n      <div>\n        <h2>Puhelinluettelo</h2>\n        <Notification message={this.state.notificationMessage} />\n        <FilterForm filter={this.state.filter} onChange={this.handleFilterChange} />\n        <AddEntryForm\n          onSubmit={this.addEntry}\n          newName={this.state.newName}\n          handleNameChange={this.handleNameChange}\n          newNumber={this.state.newNumber}\n          handleNumberChange={this.handleNumberChange}\n        />\n        <h2>Numerot</h2>\n        <table>\n          <tbody>\n            {personsToShow.map((person) =>\n              <PhoneCatalogEntry\n                key={person.name + person.number}\n                person={person}\n                clickHandler={this.handleRemoveClick(person.id, person.name)} />)}\n          </tbody>\n        </table>\n      </div >\n    )\n  }\n}\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className='notification'>{message}</div>\n  )\n}\n\nconst AddEntryForm = ({ onSubmit, newName, handleNameChange, newNumber, handleNumberChange }) => (\n  <div>\n    <h2>Lisää uusi / muuta olemassaolevan numeroa</h2>\n    <form onSubmit={onSubmit}>\n      <div>\n        nimi: <input\n          value={newName}\n          onChange={handleNameChange} />\n      </div>\n      <div>\n        numero: <input\n          value={newNumber}\n          onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">lisää</button>\n      </div>\n    </form>\n  </div>\n)\n\nconst FilterForm = ({ filter, onChange }) => (\n  <div>\n    rajaa näytettäviä\n    <input value={filter} onChange={onChange} />\n  </div>\n)\n\nconst PhoneCatalogEntry = ({ person, clickHandler }) => (\n  <tr key={person.name}>\n    <td>{person.name}</td>\n    <td>{person.number}</td>\n    <td>\n      <button\n        onClick={clickHandler}>\n        poista\n        </button>\n    </td>\n  </tr>\n)\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}