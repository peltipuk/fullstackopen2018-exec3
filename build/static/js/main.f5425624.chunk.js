(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(44)},42:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(11),l=n.n(r),c=n(16),i=n(4),u=n(12),s=n(13),m=n(15),f=n(14),d=n(17),h=n(2),p=n.n(h),g="http://localhost:3001/api/persons",w={getAll:function(){return p.a.get(g).then(function(e){return e.data})},create:function(e){return p.a.post(g,e).then(function(e){return e.data})},update:function(e,t){return p.a.put("".concat(g,"/").concat(e),t).then(function(e){return e.data})},remove:function(e){return p.a.delete("".concat(g,"/").concat(e))}},N=3e3,b=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).componentDidMount=function(){console.log("componentDidMount"),w.getAll().then(function(e){n.setState({persons:e})})},n.clearNotification=function(e){setTimeout(function(){n.setState({notificationMessage:null})},e)},n.createNewPerson=function(){return console.log("Creating person"),w.create({name:n.state.newName,number:n.state.newNumber}).then(function(e){console.log("Created new person: ",e),n.setState({persons:Object(i.a)(n.state.persons).concat([e]),newName:"",newNumber:"",notificationMessage:"lis\xe4ttiin ".concat(e.name)}),n.clearNotification(N)})},n.addEntry=function(e){e.preventDefault();var t=n.state.persons.find(function(e){return e.name===n.state.newName});if(void 0===t){var a=n.createNewPerson();console.log("createNewPerson() return promise: ",a)}else window.confirm("".concat(n.state.newName," on jo luettelossa, korvataanko vanha numero uudella?"))?w.update(t.id,Object(c.a)({},t,{number:n.state.newNumber})).then(function(e){console.log("Updated resource:",e),n.setState({persons:Object(i.a)(n.state.persons.filter(function(t){return t.id!==e.id})).concat([e]),newName:"",newNumber:"",notificationMessage:"".concat(e.name,": numero muutettu")}),n.clearNotification(N)}).catch(function(e){n.setState({persons:n.state.persons.filter(function(e){return e.name!==t.name})}),console.log("Could not update ".concat(t.name,": creating instead"));var a=n.createNewPerson();console.log("createNewPerson() return promise: ",a)}):console.log("Cancelled updating of ".concat(n.state.newName))},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){n.setState({filter:e.target.value})},n.handleRemoveClick=function(e,t){return function(){window.confirm("Delete '".concat(t,"'"))?(console.log("Removing person with id ".concat(e)),w.remove(e).then(function(a){console.log("Delete response status: ",a.status),n.setState({persons:n.state.persons.filter(function(t){return t.id!==e}),notificationMessage:"poistettiin ".concat(t)}),n.clearNotification(N)})):console.log("Cancelled deleting of ".concat(t))}},n.state={persons:[],newName:"",newNumber:"",filter:"",notificationMessage:null},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.persons.filter(function(t){return t.name.toLowerCase().indexOf(e.state.filter.toLowerCase())>=0});return o.a.createElement("div",null,o.a.createElement("h2",null,"Puhelinluettelo"),o.a.createElement(v,{message:this.state.notificationMessage}),o.a.createElement(C,{filter:this.state.filter,onChange:this.handleFilterChange}),o.a.createElement(E,{onSubmit:this.addEntry,newName:this.state.newName,handleNameChange:this.handleNameChange,newNumber:this.state.newNumber,handleNumberChange:this.handleNumberChange}),o.a.createElement("h2",null,"Numerot"),o.a.createElement("table",null,o.a.createElement("tbody",null,t.map(function(t){return o.a.createElement(k,{key:t.name+t.number,person:t,clickHandler:e.handleRemoveClick(t.id,t.name)})}))))}}]),t}(o.a.Component),v=function(e){var t=e.message;return null===t?null:o.a.createElement("div",{className:"notification"},t)},E=function(e){var t=e.onSubmit,n=e.newName,a=e.handleNameChange,r=e.newNumber,l=e.handleNumberChange;return o.a.createElement("div",null,o.a.createElement("h2",null,"Lis\xe4\xe4 uusi / muuta olemassaolevan numeroa"),o.a.createElement("form",{onSubmit:t},o.a.createElement("div",null,"nimi: ",o.a.createElement("input",{value:n,onChange:a})),o.a.createElement("div",null,"numero: ",o.a.createElement("input",{value:r,onChange:l})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},C=function(e){var t=e.filter,n=e.onChange;return o.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4",o.a.createElement("input",{value:t,onChange:n}))},k=function(e){var t=e.person,n=e.clickHandler;return o.a.createElement("tr",{key:t.name},o.a.createElement("td",null,t.name),o.a.createElement("td",null,t.number),o.a.createElement("td",null,o.a.createElement("button",{onClick:n},"poista")))},S=b;n(42);l.a.render(o.a.createElement(S,null),document.getElementById("root"))}},[[18,2,1]]]);
//# sourceMappingURL=main.f5425624.chunk.js.map